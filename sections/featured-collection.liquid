{%- comment -%}
  Section: Featured
  Purpose: Display products from a specified Shopify collection by handle.
{%- endcomment -%}

<section class="featured featured--{{ section.id }}">
  {%- assign coll = collections[section.settings.collection_handle] -%}

  {%- if coll and coll.products.size > 0 -%}
    <header class="featured__header">
      <h2 class="featured__title">{{ section.settings.title | escape }}</h2>
    </header>

    <ul class="featured__grid">
      {%- for product in coll.products -%}
        <li class="featured-card">
          <a class="featured-card__image-link" href="/products/{{ product.handle }}">
            {%- if product.featured_image -%}
              <img
                class="featured-card__image"
                src="{{ product.featured_image | img_url: 'medium' }}"
                alt="{{ product.title | escape }}">
            {%- else -%}
              <span class="featured-card__image featured-card__image--placeholder"></span>
            {%- endif -%}
          </a>

          <h3 class="featured-card__title">
            <a class="featured-card__title-link" href="/products/{{ product.handle }}">
              {{ product.title }}
            </a>
          </h3>

          <p class="featured-card__price">{{ product.price | money }}</p>

          <a class="featured-card__cta" href="/products/{{ product.handle }}">View Product</a>
        </li>
      {%- endfor -%}
    </ul>
  {%- else -%}
    <header class="featured__header">
      <h2 class="featured__title">{{ section.settings.title | escape }}</h2>
    </header>
    <p class="featured__empty">No products in this collection yet.</p>
  {%- endif -%}
</section>

{% schema %}
{
  "name": "Featured",
  "settings": [
    {
      "type": "text",
      "id": "collection_handle",
      "label": "Collection handle",
      "default": "featured",
      "info": "Enter the collection handle (example: featured)."
    },
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "Featured Collection"
    }
  ],
  "presets": [
    { "name": "Featured" }
  ]
}
{% endschema %}
