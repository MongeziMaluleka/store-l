{%- comment -%}
  Section: Collections menu (handle-based, link to collection pages)
  Fixes:
  - No size comparisons on strings.
  - No request.params logic.
  - Purely renders links to /collections/<handle> by resolving collections[handle].
{%- endcomment -%}

<section class="cmenu cmenu--{{ section.id }}">
  {%- if section.settings.heading != blank -%}
    <h2 class="cmenu__heading">{{ section.settings.heading | escape }}</h2>
  {%- endif -%}

  <nav class="cmenu__nav" aria-label="Collections">
    <ul class="cmenu__list">
      {%- for i in (1..10) -%}
        {%- assign key = 'handle_' | append: i -%}
        {%- assign h = section.settings[key] -%}
        {%- if h != blank -%}
          {%- assign c = collections[h] -%}
          <li class="cmenu__item">
            {%- if c -%}
              <a class="cmenu__link" href="{{ c.url }}">{{ c.title }}</a>
            {%- else -%}
              <span class="cmenu__link cmenu__link--missing">Missing: {{ h }}</span>
            {%- endif -%}
          </li>
        {%- endif -%}
      {%- endfor -%}
    </ul>
  </nav>
</section>

{% schema %}
{
  "name": "Collections menu",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "Browse collection" },

    { "type": "header", "content": "Handles" },
    { "type": "text", "id": "handle_1", "label": "Handle 1", "default": "featured" },
    { "type": "text", "id": "handle_2", "label": "Handle 2", "default": "t-shirts" },
    { "type": "text", "id": "handle_3", "label": "Handle 3" },
    { "type": "text", "id": "handle_4", "label": "Handle 4" },
    { "type": "text", "id": "handle_5", "label": "Handle 5" },
    { "type": "text", "id": "handle_6", "label": "Handle 6" },
    { "type": "text", "id": "handle_7", "label": "Handle 7" },
    { "type": "text", "id": "handle_8", "label": "Handle 8" },
    { "type": "text", "id": "handle_9", "label": "Handle 9" },
    { "type": "text", "id": "handle_10", "label": "Handle 10" }
  ],
  "presets": [
    { "name": "Collections menu" }
  ]
}
{% endschema %}
